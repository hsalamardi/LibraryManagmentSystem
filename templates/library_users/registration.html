<!DOCTYPE html>
{% extends 'landing_page.html' %}
{% load static %}

{% block title %}Register - NTA Library{% endblock %}

{% block body_block %}
<body>
    <div class="container mt-4">
        {% if registered %}
            <!-- Success Message -->
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="dashboard-card text-center">
                        <div class="mb-4">
                            <i class="fas fa-check-circle" style="font-size: 4rem; color: #28a745;"></i>
                        </div>
                        <h2 class="text-success mb-3">Registration Successful!</h2>
                        <p class="lead mb-4">Thank you for joining NTA Library! Your account has been created successfully.</p>
                        <div class="alert alert-info">
                            <h6 class="alert-heading"><i class="fas fa-info-circle me-2"></i>What's Next?</h6>
                            <ul class="mb-0 text-start">
                                <li>You can now log in to your account</li>
                                <li>Browse our extensive book collection</li>
                                <li>Submit borrowing requests</li>
                                <li>Reserve books and track your reading history</li>
                            </ul>
                        </div>
                        <div class="mt-4">
                            <a href="{% url 'library_users:login' %}" class="btn btn-primary btn-lg me-3">
                                <i class="fas fa-sign-in-alt me-2"></i>Login Now
                            </a>
                            <a href="{% url 'books:view_books_list' %}" class="btn btn-outline-primary btn-lg">
                                <i class="fas fa-books me-2"></i>Browse Books
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        {% else %}
            <!-- Registration Form -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="hero-section">
                        <div class="hero-content text-center">
                            <h1 class="hero-title"><i class="fas fa-user-plus me-3"></i>Join NTA Library</h1>
                            <p class="hero-subtitle">Create your account to access our extensive collection of books and resources.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="dashboard-card">
                        <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
                            {% csrf_token %}
                            
                            <!-- Personal Information Section -->
                            <div class="mb-5">
                                <h4 class="mb-4"><i class="fas fa-user me-2"></i>Personal Information</h4>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.first_name.id_for_label }}" class="form-label">
                                            <i class="fas fa-user me-2"></i>First Name <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="{{ user_form.first_name.id_for_label }}"
                                               name="{{ user_form.first_name.name }}"
                                               value="{{ user_form.first_name.value|default:'' }}"
                                               placeholder="Enter your first name"
                                               required>
                                        <div class="invalid-feedback">
                                            Please provide your first name.
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.last_name.id_for_label }}" class="form-label">
                                            <i class="fas fa-user me-2"></i>Last Name <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="{{ user_form.last_name.id_for_label }}"
                                               name="{{ user_form.last_name.name }}"
                                               value="{{ user_form.last_name.value|default:'' }}"
                                               placeholder="Enter your last name"
                                               required>
                                        <div class="invalid-feedback">
                                            Please provide your last name.
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Account Information Section -->
                            <div class="mb-5">
                                <h4 class="mb-4"><i class="fas fa-key me-2"></i>Account Information</h4>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.username.id_for_label }}" class="form-label">
                                            <i class="fas fa-at me-2"></i>Username <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="{{ user_form.username.id_for_label }}"
                                               name="{{ user_form.username.name }}"
                                               value="{{ user_form.username.value|default:'' }}"
                                               placeholder="Choose a unique username"
                                               required>
                                        <div class="form-text">This will be your login username.</div>
                                        <div class="invalid-feedback">
                                            Please choose a username.
                                        </div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.email.id_for_label }}" class="form-label">
                                            <i class="fas fa-envelope me-2"></i>Email Address <span class="text-danger">*</span>
                                        </label>
                                        <input type="email" 
                                               class="form-control" 
                                               id="{{ user_form.email.id_for_label }}"
                                               name="{{ user_form.email.name }}"
                                               value="{{ user_form.email.value|default:'' }}"
                                               placeholder="Enter your email address"
                                               required>
                                        <div class="form-text">We'll use this for notifications and account recovery.</div>
                                        <div class="invalid-feedback">
                                            Please provide a valid email address.
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ user_form.password.id_for_label }}" class="form-label">
                                            <i class="fas fa-lock me-2"></i>Password <span class="text-danger">*</span>
                                        </label>
                                        <input type="password" 
                                               class="form-control" 
                                               id="{{ user_form.password.id_for_label }}"
                                               name="{{ user_form.password.name }}"
                                               placeholder="Create a secure password"
                                               minlength="8"
                                               required>
                                        <div class="form-text">Password must be at least 8 characters long.</div>
                                        <div class="invalid-feedback">
                                            Please provide a password (minimum 8 characters).
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Additional Information Section -->
                            <div class="mb-5">
                                <h4 class="mb-4"><i class="fas fa-info-circle me-2"></i>Additional Information</h4>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.department.id_for_label }}" class="form-label">
                                            <i class="fas fa-building me-2"></i>Department
                                        </label>
                                        <input type="text" 
                                               class="form-control" 
                                               id="{{ profile_form.department.id_for_label }}"
                                               name="{{ profile_form.department.name }}"
                                               value="{{ profile_form.department.value|default:'' }}"
                                               placeholder="Your department or organization">
                                        <div class="form-text">Optional: Help us understand our community better.</div>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="{{ profile_form.profile_image.id_for_label }}" class="form-label">
                                            <i class="fas fa-image me-2"></i>Profile Picture
                                        </label>
                                        <input type="file" 
                                               class="form-control" 
                                               id="{{ profile_form.profile_image.id_for_label }}"
                                               name="{{ profile_form.profile_image.name }}"
                                               accept="image/*">
                                        <div class="form-text">Optional: Upload a profile picture (JPG, PNG, GIF).</div>
                                    </div>
                                </div>
                            </div>

                            <!-- Terms and Conditions -->
                            <div class="mb-4">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="terms" required>
                                    <label class="form-check-label" for="terms">
                                        I agree to the <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a> <span class="text-danger">*</span>
                                    </label>
                                    <div class="invalid-feedback">
                                        You must agree to the terms and conditions.
                                    </div>
                                </div>
                            </div>

                            <!-- Submit Button -->
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-primary-custom btn-lg">
                                    <i class="fas fa-user-plus me-2"></i>Create My Account
                                </button>
                            </div>
                        </form>
                        
                        <!-- Login Link -->
                        <div class="text-center mt-4">
                            <p class="text-muted">Already have an account? 
                                <a href="{% url 'library_users:login' %}" class="text-primary text-decoration-none">
                                    <i class="fas fa-sign-in-alt me-1"></i>Login here
                                </a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Benefits Section -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="dashboard-card">
                        <h5 class="mb-4"><i class="fas fa-star me-2"></i>Why Join NTA Library?</h5>
                        <div class="row">
                            <div class="col-md-3 mb-3">
                                <div class="text-center">
                                    <i class="fas fa-books" style="font-size: 2rem; color: var(--primary-color);"></i>
                                    <h6 class="mt-2">Extensive Collection</h6>
                                    <p class="text-muted small">Access thousands of books across all genres</p>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="text-center">
                                    <i class="fas fa-mobile-alt" style="font-size: 2rem; color: var(--primary-color);"></i>
                                    <h6 class="mt-2">Digital Access</h6>
                                    <p class="text-muted small">Manage your account online anytime</p>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="text-center">
                                    <i class="fas fa-bell" style="font-size: 2rem; color: var(--primary-color);"></i>
                                    <h6 class="mt-2">Smart Notifications</h6>
                                    <p class="text-muted small">Get reminders for due dates and reservations</p>
                                </div>
                            </div>
                            <div class="col-md-3 mb-3">
                                <div class="text-center">
                                    <i class="fas fa-users" style="font-size: 2rem; color: var(--primary-color);"></i>
                                    <h6 class="mt-2">Community</h6>
                                    <p class="text-muted small">Join a community of book lovers</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>

    <script>
        // Form validation
        (function() {
            'use strict';
            window.addEventListener('load', function() {
                var forms = document.getElementsByClassName('needs-validation');
                var validation = Array.prototype.filter.call(forms, function(form) {
                    form.addEventListener('submit', function(event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        form.classList.add('was-validated');
                    }, false);
                });
            }, false);
        })();
    </script>
</body>
{% endblock %}